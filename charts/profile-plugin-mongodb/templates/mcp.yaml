{{/*---*/}}
{{/*apiVersion: v1*/}}
{{/*kind: Service*/}}
{{/*metadata:*/}}
{{/*  name: mongodb-mcp*/}}
{{/*  namespace: {{ .Release.Namespace }}*/}}
{{/*  labels:*/}}
{{/*    app: mongodb-mcp*/}}
{{/*spec:*/}}
{{/*  ports:*/}}
{{/*    - name: http*/}}
{{/*      port: 3000*/}}
{{/*      targetPort: http*/}}
{{/*      protocol: TCP*/}}
{{/*  selector:*/}}
{{/*    app: mongodb-mcp*/}}
{{/*---*/}}
{{/*apiVersion: apps/v1*/}}
{{/*kind: Deployment*/}}
{{/*metadata:*/}}
{{/*  name: mongodb-mcp*/}}
{{/*  namespace: {{ .Release.Namespace }}*/}}
{{/*  labels:*/}}
{{/*    app: mongodb-mcp*/}}
{{/*spec:*/}}
{{/*  replicas: 1*/}}
{{/*  selector:*/}}
{{/*    matchLabels:*/}}
{{/*      app: mongodb-mcp*/}}
{{/*  template:*/}}
{{/*    metadata:*/}}
{{/*      labels:*/}}
{{/*        app: mongodb-mcp*/}}
{{/*    spec:*/}}
{{/*      containers:*/}}
{{/*        - name: mongodb-mcp*/}}
{{/*          image: "mongodb/mongodb-mcp-server:{{ .Values.mcpServerVersion }}"*/}}
{{/*          imagePullPolicy: Always*/}}
{{/*          args: ["--transport", "http", "--httpHost", "0.0.0.0", "--httpPort", "3000"]*/}}
{{/*          ports:*/}}
{{/*            - name: http*/}}
{{/*              containerPort: 3000*/}}
{{/*              protocol: TCP*/}}
{{/*          env:*/}}
{{/*            - name: MDB_MCP_CONNECTION_STRING*/}}
{{/*              valueFrom:*/}}
{{/*                secretKeyRef:*/}}
{{/*                  name: mongodb-credentials*/}}
{{/*                  key: service_uri*/}}
{{/*            - name: MDB_MCP_READ_ONLY*/}}
{{/*              value: "true"*/}}
{{/*            - name: MDB_MCP_DISABLED_TOOLS*/}}
{{/*              value: "atlas"*/}}
{{/*          resources:*/}}
{{/*            requests:*/}}
{{/*              cpu: "100m"*/}}
{{/*              memory: "128Mi"*/}}
{{/*            limits:*/}}
{{/*              cpu: "500m"*/}}
{{/*              memory: "512Mi"*/}}
{{/*          securityContext:*/}}
{{/*            allowPrivilegeEscalation: false*/}}
{{/*          livenessProbe:*/}}
{{/*            tcpSocket:*/}}
{{/*              port: http*/}}
{{/*            initialDelaySeconds: 10*/}}
{{/*            periodSeconds: 30*/}}
{{/*          readinessProbe:*/}}
{{/*            tcpSocket:*/}}
{{/*              port: http*/}}
{{/*            initialDelaySeconds: 5*/}}
{{/*            periodSeconds: 10*/}}
